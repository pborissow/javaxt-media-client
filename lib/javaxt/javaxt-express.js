//javaxt-express 1.5.1
if(!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.app||(javaxt.express.app={}),javaxt.express.app.Horizon=function(parent,config){this.className="javaxt.express.app.Horizon";var waitmask,auth,currUser,ws,communicationError,timeoutWarning,profileButton,menuButton,mainMenu,profileMenu,callout,tabbar,body,footer,me=this,defaultConfig={name:"Express",style:{javaxt:javaxt.dhtml.style.default,header:{div:"app-header",icon:"app-header-icon noselect",profileButton:"app-header-profile noselect",menuButton:"app-header-menu noselect",menuPopup:"app-menu",menuItem:"app-menu-item noselect"},navbar:{div:"app-nav-bar",tabs:"app-tab-container"},body:{div:"app-body"},footer:{div:"app-footer"},communicationError:{div:"communication-error center",icon:"communication-error-icon",title:"title",message:"message",closeButton:"close"}},url:{login:"login",logoff:"logoff",websocket:"/ws"},keywords:{requestedTab:"tab"},autoLogoff:!1,windows:[],renderers:{profileButton:function(){}},messages:{connectionLost:"The connection to the server has been lost. The internet might be down or there might be a problem with the server. Some features might not work as expected while the server is offline. Please do not refresh your browser. We will try to reconnect in a few moments.",connectionTimeout:"We have lost contact with the server. It has been unavailable for over 5 minutes. Please check your internet connection or contact the system administrator for assistance."}},connected=!1,tabs={},panels={},timers={},userInteractions=["mousemove","click","keydown","touchmove","wheel"],init=function(){config||(config={}),config=merge(config,defaultConfig),auth=new javaxt.dhtml.Authentication(config.url.login,config.url.logoff),config.fx||(config.fx=new javaxt.dhtml.Effects),config.waitmask&&config.waitmask.el.parentNode||(config.waitmask=new javaxt.express.WaitMask(document.body)),waitmask=config.waitmask,document.addEventListener("keydown",function(t){(65==t.keyCode||72==t.keyCode||79==t.keyCode||80==t.keyCode||83==t.keyCode)&&(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&(t.preventDefault(),t.stopPropagation())});var e=createTable(parent);createHeader(e.addRow().addColumn(config.style.header.div));var t=e.addRow().addColumn(config.style.navbar.div);tabbar=createElement("div",t,config.style.navbar.tabs),body=e.addRow().addColumn(config.style.body.div),body.style.height="100%",footer=e.addRow().addColumn(config.style.footer.div),me.el=e};this.update=function(e,t){document.title=config.name,updateTabs(t);var i=currUser?currUser.id:null;updateUser(e);e.id===i||(enablePopstateListener(),enableEventListeners(),config.autoLogoff&&0<config.autoLogoff&&(timers.logoff=setTimeout(me.logoff,config.autoLogoff)),!ws&&(ws=new javaxt.dhtml.WebSocket({url:config.url.websocket,onMessage:function(e){try{me.onMessage(e)}catch(t){}var t=e.split(","),l=t[0],a=t[1],s=t[2],o=t[3],d=s+"",n=!isNaN(parseFloat(d))&&!isNaN(d-0);if(n)try{var r=parseInt(s);isNaN(r)||(s=r)}catch(t){}try{o=parseInt(o)}catch(t){}processEvent(l,a,s,o)},onConnect:function(){connected||(connected=!0,processEvent("connect","WebSocket",-1,-1))},onDisconnect:function(){connected&&(connected=!1,processEvent("disconnect","WebSocket",-1,-1))},onTimeout:function(){connected=!1,communicationError&&communicationError.hide(!0),timeoutWarning||createTimeoutWarning(),timeoutWarning.show()}})))},this.getTabs=function(){var e=[];for(var t in tabs)tabs.hasOwnProperty(t)&&e.push({name:t,tab:tabs[t],panel:panels[t]});return e},this.getTab=function(e){var t=tabs[e];return t?{name:e,tab:t,panel:panels[e]}:null},this.beforeTabChange=function(){},this.onTabChange=function(){},this.sendMessage=function(e){ws&&ws.send(e)},this.onMessage=function(){},this.onModelChangeEvent=function(){},this.onLogOff=function(){},this.onUserInteration=function(){};var onUserInteration=function(t){me.onUserInteration(t),timers.logoff&&(clearTimeout(timers.logoff),timers.logoff=setTimeout(me.logoff,config.autoLogoff))},enableEventListeners=function(){userInteractions.forEach(e=>{document.body.addEventListener(e,onUserInteration)})},disableEventListeners=function(){userInteractions.forEach(e=>{document.body.removeEventListener(e,onUserInteration)})},updateUser=function(e){currUser=e,e&&profileButton.show(),config.renderers.profileButton&&config.renderers.profileButton(e,profileButton);var i,l,a=getParameter(config.keywords.requestedTab).toLowerCase();for(var t in tabs)if(tabs.hasOwnProperty(t)){var n=tabs[t];n.isVisible()&&("active"===n.className&&(i=t),t.toLowerCase()===a&&(l=t))}e.preferences=new javaxt.express.UserPreferences(()=>{if(l){var t=window.location.href;t=t.replace("tab="+getParameter(config.keywords.requestedTab),""),t.lastIndexOf("&")===t.length-1&&(t=t.substring(0,t.length-1)),t.lastIndexOf("?")===t.length-1&&(t=t.substring(0,t.length-1)),me.updateHistory({title:config.name+" - "+l,tab:l,url:t}),tabs[l].raise()}else if(i||(i=e.preferences.get("Tab")),i&&tabs[i])me.updateHistory({title:config.name+" - "+i,tab:i}),tabs[i].raise();else for(var a in tabs)if(tabs.hasOwnProperty(a)){me.updateHistory({title:config.name+" - "+a,tab:a}),tabs[a].raise();break}})},processEvent=function(e,t,i,l){if("WebSocket"===t)currUser&&("connect"===e?(communicationError&&communicationError.hide(),timeoutWarning&&timeoutWarning.close(),menuButton.hideMessage()):(!communicationError&&createErrorMessage(),communicationError.show()));else if(!("WebFile"===t))me.onModelChangeEvent(e,t,i,l);else if(currUser&&currUser.preferences){var a=currUser.preferences.get("AutoReload");!0===a||"true"===a?location.reload():confirm({width:515,title:"Update Available",text:"An update is available for this application. Would you like to update now?",leftButton:{label:"Yes",value:!0},rightButton:{label:"No",value:!1},callback:function(e){!0===e?location.reload():menuButton.showMessage("Update Available")}})}for(var n in panels)if(panels.hasOwnProperty(n)){var s=panels[n];s.notify&&s.notify(e,t,i,l)}},createHeader=function(e){var t=createTable(e).addRow();createElement("div",t.addColumn(),config.style.header.icon),t.addColumn().style.width="100%",createProfileButton(t.addColumn()),createMenuButton(t.addColumn())},updateTabs=function(e){var t={};e&&(isArray(e)?e.forEach(e=>{t[e.name]=e.cls}):t=e);var i;for(var l in tabs)if(tabs.hasOwnProperty(l)){var a=tabs[l];a.parentNode&&tabbar.removeChild(a),"active"===a.className&&(i=l)}for(var l in t)if(t.hasOwnProperty(l))if(tabs[l]){var a=tabs[l];tabbar.appendChild(a),a.show()}else createTab(l,t[l]);if(i)if(t[i]){tabs[i].className="active";var n=panels[i];n&&n.show()}else{tabs[i].className="";var n=panels[i];n&&n.hide()}},createTab=function(label,className){if(!tabs[label]){var tab=createElement("div",tabbar);tab.innerText=label;var fn=function(){var panel=panels[label];if(Object.values(panels).forEach(e=>{e===panel||e.hide()}),panel)panel.show();else{var cfg={style:config.style.javaxt,fx:config.fx,waitmask:config.waitmask};for(var key in config)if(config.hasOwnProperty(key)){if(defaultConfig[key])continue;cfg[key]=config[key]}var cls=eval(className);panel=new cls(body,cfg),addShowHide(panel),panels[label]=panel,panel.update&&panel.update()}};tab.raise=function(){if("active"!==this.className){hideWindows();for(var e=0;e<tabbar.childNodes.length;e++)tabbar.childNodes[e].className="";this.className="active",fn.apply(me,[]),document.title=config.name+" - "+label,currUser&&currUser.preferences.set("Tab",label),me.onTabChange({name:label,tab:this,panel:panels[label]})}},tab.onclick=function(){if("active"!==this.className){for(var e,a,n=0;n<tabbar.childNodes.length;n++)if(a=tabbar.childNodes[n],"active"===a.className){var s=a.innerText;e={name:s,tab:a,panel:panels[s]};break}me.beforeTabChange(e,{name:label,tab:this,panel:panels[label]}),me.addHistory({title:config.name+" - "+label,tab:label}),this.raise()}},tabs[label]=tab,addShowHide(tab)}};this.addHistory=function(e){updateState(e,!1)},this.updateHistory=function(e){updateState(e,!0)};var updateState=function(e,t){var i=e.title;i||(i=document.title);var l="";e.url&&(l=e.url,delete e.url);var a=window.history.state;a||(a={}),a[me.className]=e,a[me.className].lastUpdate={date:new Date().getTime(),event:t?"replaceState":"pushState"},t?(document.title=i,history.replaceState(a,i,l)):(history.pushState(a,i,l),document.title=i)},enablePopstateListener=function(){disablePopstateListener(),window.addEventListener("popstate",popstateListener),history.replaceState({},null,"")},disablePopstateListener=function(){window.removeEventListener("popstate",popstateListener)},popstateListener=function(i){if(i.state[me.className]){var e=i.state[me.className].tab,l=getParameter(config.keywords.requestedTab).toLowerCase();if(l&&0<l.length&&l!==e.toLowerCase())for(var t in tabs)if(tabs.hasOwnProperty(t)){var a=tabs[t];if(a.isVisible()&&t.toLowerCase()===l){e=t;break}}var a=tabs[e];a&&a.raise()}else history.back()},createBody=function(){},createFooter=function(){},createMenuButton=function(e){menuButton=createElement("div",e,config.style.header.menuButton),menuButton.label=createElement("div",menuButton,"label"),menuButton.icon=createElement("div",menuButton,"icon"),menuButton.label.style.opacity=0,menuButton.showMessage=function(e){e||(e="Warning"),menuButton.classList.add("warning"),menuButton.label.innerText=e,menuButton.label.style.opacity=1},menuButton.hideMessage=function(){menuButton.label.style.opacity=0,menuButton.label.style.display="none",menuButton.classList.remove("warning"),setTimeout(()=>{menuButton.label.style.display="",menuButton.label.style.opacity=0},500)},menuButton.onclick=function(){currUser&&showMenu(getMainMenu(),this)},addShowHide(menuButton)},showMenu=function(e,t){for(var l,a=0,n=0;n<e.childNodes.length;n++)l=e.childNodes[n],l.isVisible()&&a++;if(0!==a){for(var s=getCallout(),o=s.getInnerDiv();o.firstChild;)o.removeChild(o.lastChild);o.appendChild(e);var d=javaxt.dhtml.utils.getRect(t),r=d.x+d.width/2,h=d.y+d.height+3;s.showAt(r,h,"below","right")}},createProfileButton=function(e){profileButton=createElement("div",e,config.style.header.profileButton),profileButton.onclick=function(){currUser&&showMenu(getProfileMenu(),this)},addShowHide(profileButton)},getProfileMenu=function(){if(!profileMenu){var e=createElement("div",config.style.header.menuPopup);e.appendChild(createMenuOption("Account Settings","edit",function(){console.log("Show Account")})),e.appendChild(createMenuOption("Sign Out","times",function(){me.logoff()})),profileMenu=e}return profileMenu},createMenuOption=function(e,t,i){var l=createElement("div",config.style.header.menuItem);return l.innerHTML=t&&0<t.length?"<i class=\"fas fa-"+t+"\"></i>"+e:e,l.label=e,l.onclick=function(){callout.hide(),i.apply(this,[e])},addShowHide(l),l},createErrorMessage=function(){var e=createElement("div",parent,{position:"absolute",top:"10px",width:"100%",height:"0px",display:"none"}),t=config.fx,i="easeInBack",l=1e3,a=!1;e.show=function(){a||(a=!0,t.fadeIn(e,i,l))},e.hide=function(n){a&&(a=!1,!0===n&&(e.style.display="none"),t.fadeOut(e,i,l/2))},e.isVisible=function(){return a};var n=config.style.communicationError,s=isString(n),o=createElement("div",e,s?n:n.div);createElement("div",o,s?"icon":n.icon),createElement("div",o,s?"title":n.title).innerText="Connection Lost",createElement("div",o,s?"message":n.message).innerText=config.messages.connectionLost;var d=createElement("div",o,s?"close":n.closeButton);d.onclick=function(){e.hide(!0),setTimeout(()=>{menuButton.showMessage("Offline")},500)},config.windows.push(e),communicationError=e},createTimeoutWarning=function(){timeoutWarning=new javaxt.dhtml.Window(document.body,{width:470,valign:"top",modal:!0,title:"Warning",style:config.style.javaxt.window,buttons:[{name:"OK",onclick:function(){timeoutWarning.close()}}]}),config.windows.push(timeoutWarning);var e=createTable(timeoutWarning.getBody());e.style.height="";var t=e.addRow(),i=createElement("div",t.addColumn({verticalAlign:"top"}),{padding:"3px 10px"});createElement("div",i,config.style.communicationError.icon),t.addColumn({width:"100%"}).innerText=config.messages.connectionTimeout,timeoutWarning.onClose=function(){menuButton.showMessage("Offline")},timeoutWarning.onOpen=function(){communicationError&&communicationError.hide()}},hideWindows=function(){config.windows.forEach(e=>{e.hide()})};this.logoff=function(){waitmask.show(),currUser=null;var e=window.history.state;e||(e={});var t=window.location.href,i=t.indexOf("?");for(var l in-1<i&&(t=t.substring(0,i)),document.title=config.name,history.replaceState(e,config.name,t),disableEventListeners(),disablePopstateListener(),ws&&(ws.stop(),ws=null),timers)if(timers.hasOwnProperty(l)){var a=timers[l];clearTimeout(a)}for(var l in timers={},hideWindows(),tabbar.innerHTML="",tabs={},panels)if(panels.hasOwnProperty(l)){var n=panels[l];n.clear&&n.clear(),destroy(n)}if(panels={},menuButton.hideMessage(),mainMenu){var s=mainMenu.parentNode;s&&s.removeChild(mainMenu),mainMenu=null}if(profileButton.hide(),profileMenu){var s=profileMenu.parentNode;s&&s.removeChild(profileMenu),profileMenu=null}auth.logoff(function(){me.onLogOff();var e=new javaxt.dhtml.PageLoader;e.loadPage("index.html",function(){waitmask.hide()})})};var getCallout=function(){if(callout){var e=callout.el.parentNode;e||(callout.el.innerHTML="",callout=null)}return callout||(callout=new javaxt.dhtml.Callout(document.body,{style:config.style.callout})),callout},createElement=javaxt.dhtml.utils.createElement,getParameter=javaxt.dhtml.utils.getParameter,createTable=javaxt.dhtml.utils.createTable,addShowHide=javaxt.dhtml.utils.addShowHide,isString=javaxt.dhtml.utils.isString,isArray=javaxt.dhtml.utils.isArray,destroy=javaxt.dhtml.utils.destroy,merge=javaxt.dhtml.utils.merge;init()},!javaxt)var javaxt={};javaxt.express||(javaxt.express={}),javaxt.express.UserPreferences=function(e,t){var i=this,l={};this.refresh=function(e,t){o("UserPreferences?fields=key,value&format=json",{success:function(a){l={},JSON.parse(a).forEach(e=>{l[e.key]=e.value}),t||(t=i),e.apply(t,[n(l)])},failure:function(){}})},this.get=function(e){var t=l[e.toLowerCase()];return"undefined"==typeof t?null:a(t)?n(t):t},this.set=function(e,t,i){if(e=e.toLowerCase().trim(),l[e]!==t)if(a(t)&&(t=n(t)),!0===i)l[e]=t;else{var o={key:e,value:t};s("UserPreference",JSON.stringify(o),{success:function(){l[e]=t},failure:function(){}})}};var a=function(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)},n=function(e){return JSON.parse(JSON.stringify(e))},s=javaxt.dhtml.utils.post,o=javaxt.dhtml.utils.get;this.refresh(e,t)};var alert=function(e){javaxt.dhtml.utils.alert(e)};if(!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.DBView=function(e,t){this.className="javaxt.express.DBView";var i,l,a,n,s,o,d,r,h,p,c=this,u={queryLanguage:"sql",queryService:"sql/job/",getTables:"sql/tables/",createJob:"sql/job/",cancelJob:"sql/job/{jobID}",getJob:"sql/job/{jobID}",pageSize:50,format:"json",style:{container:{width:"100%",height:"100%"},border:"1px solid #383b41",leftPanel:{backgroundColor:"#272a31",borderRight:"1px solid #383b41",color:"#bfc0c3"},bottomPanel:{backgroundColor:"#e4e4e4",borderTop:"1px solid #b5b5b5"},toolbar:"panel-toolbar",toolbarButton:{},toolbarIcons:{run:"runIcon",cancel:"deleteIcon"},editor:{height:"240px"},table:{},tree:{padding:"7px 0 7px 0px",backgroundColor:"",li:"tree-node"},error:{fontFamily:"\"Consolas\", \"Bitstream Vera Sans Mono\", \"Courier New\", Courier, monospace",color:"#6c6c6c",padding:"10px"}},onTreeClick:function(e){var t=e.name;if(e.node){var i=e.node.schema;i&&"public"!==i&&(t=i+"."+t)}a.setValue("select * from "+t)}};this.setQuery=function(e){e?e===a.getValue()||(a.setValue(e),c.clearResults()):c.clear()},this.getQuery=function(){return a.getValue()},this.executeQuery=function(){w(),o&&o.show(500),c.clearResults(),n=null;var e={query:a.getValue(),limit:t.pageSize,format:t.format};x(e,function(e){r.disable();var t=C(e.responseText);k(t.records,t.columns),o&&o.hide()})},this.clear=function(){a.setValue(""),c.clearResults()},this.clearResults=function(){if(n)try{n.clear(),I(n)}catch(t){}s.innerHTML=""},this.getComponents=function(){return{tree:i,grid:n,editor:a,toolbar:l}};var g=function(e){var l=W("div",e,{position:"relative",height:"100%",width:"210px",overflow:"auto"}),a=W("div",l,{position:"absolute",width:"100%"});return i=new javaxt.dhtml.Tree(a,{style:t.style.tree}),i.onClick=function(e){t.onTreeClick.apply(c,[e])},l},m=function(e){var i=B(e);l=i.addRow().addColumn(t.style.toolbar),f(l);var n=i.addRow().addColumn(t.style.editor);n.style.borderBottom=p;var o=n;if("undefined"!=typeof CodeMirror){var d=W("div",n,{height:"100%",position:"relative"}),r=W("div",d,{width:"100%",height:"100%",position:"absolute",overflow:"hidden",overflowX:"auto"});a=CodeMirror(r,{value:"",mode:t.queryLanguage,lineNumbers:!0,indentUnit:4}),n.childNodes[0].style.height="100%",a.setValue=function(e){var t=this.getDoc();t.setValue(e),t.clearHistory();var i=this;setTimeout(function(){i.refresh()},200)},a.getValue=function(){return this.getDoc().getValue()}}else a=W("textarea",n,{width:"100%",height:"100%",resize:"none",border:"0 none",padding:"10px",boxSizing:"border-box"}),a.spellcheck=!1,a.getValue=function(){return this.value},a.setValue=function(e){this.value=e};n=i.addRow().addColumn(t.style.bottomPanel),n.style.height="100%",n.style.verticalAlign="top",y(n,o),s=W("div",n,{height:"100%"})},y=function(e,t){var i=W("div",e,{position:"relative"}),l=W("div",i,{position:"absolute",width:"100%",height:"10px",top:"-5px",cursor:"ns-resize",zIndex:2});javaxt.dhtml.utils.initDrag(l,{onDragStart:function(e,i){var l=this;l.yOffset=i,l.initialHeight=t.offsetHeight},onDrag:function(e,i){var l=this,a=l.yOffset-i,n=l.initialHeight-a;t.style.height=n+"px"},onDragEnd:function(){}})},b=function(e,t){var i=W("div",e,{position:"relative",height:"100%"}),l=W("div",i,{position:"absolute",height:"100%",width:"10px",left:"-5px",cursor:"ew-resize",zIndex:2});return javaxt.dhtml.utils.initDrag(l,{onDragStart:function(e,i){var l=this;l.xOffset=e,l.initialWidth=t.offsetWidth},onDrag:function(e,i){var l=this,a=l.xOffset-e,n=l.initialWidth-a;t.style.width=n+"px"},onDragEnd:function(){}}),i},f=function(e){d=T(e,{label:"Run",icon:t.style.toolbarIcons.run,disabled:!1}),d.onClick=function(){c.executeQuery()},r=T(e,{label:"Cancel",icon:t.style.toolbarIcons.cancel,disabled:!0}),r.onClick=function(){w(function(){o&&o.hide()})}},w=function(e){if(h){var i,l={success:function(){r.disable(),e&&e.apply(null,[])},failure:function(t){r.disable(),e&&e.apply(null,[]),404!==t.status&&v(t)}},a=t.cancelJob;if(a||(a=t.queryService+h),"string"==typeof a){var n=a.replace("{jobID}",h);i=javaxt.dhtml.utils.delete(n,l)}else"function"==typeof a&&(i=a.apply(c,[h,l]))}else e&&e.apply(null,[]);h=null},v=function(e){r.disable(),e&&e.responseText&&(e=0<e.responseText.length?e.responseText:e.statusText),e&&(e=e.replaceAll("\n","<br>")),s.innerHTML="";var i=W("div",s,{width:"100%",height:"100%",position:"relative",overflow:"auto"}),l=W("div",i,{width:"100%",height:"100%",position:"absolute"}),a=W("div",l,t.style.error);a.innerHTML=e,o&&o.hide()},x=function(e,i){var l={success:function(e){h=JSON.parse(e).job_id,r.enable();var l,a=function(){if(h){var e,n={success:function(t){"pending"===t||"running"===t?l=setTimeout(a,250):(clearTimeout(l),i.apply(c,[e]))},failure:function(e){clearTimeout(l),v(e)}},s=t.getJob;if(s||(s=t.queryService+h),"string"==typeof s){var o=s.replace("{jobID}",h);e=S(o,n)}else"function"==typeof s&&(e=s.apply(c,[h,n]))}else clearTimeout(l)};l=setTimeout(a,250)},failure:function(e){v(e)}},a=t.createJob;a||(a=t.queryService),"string"==typeof a?E(a,JSON.stringify(e),l):"function"==typeof a&&a.apply(c,[e,l])},C=function(e){var l=[],a=[];if("json"===t.format){var n=JSON.parse(e),s=n.rows,o=s[0];for(var d in o)o.hasOwnProperty(d)&&a.push(d);for(var r=0;r<s.length;r++){for(var o=[],h=s[r],p=0;p<a.length;p++){var d=a[p],c=h[d];o.push(c)}l.push(o)}}else if("jsv"===t.format){var n=JSON.parse(e);l=n.rows,a=n.cols}else;return{columns:a,records:l}},k=function(e,l){if(!l||0===l.length)return void v("No records");var o=W("div",s,{position:"relative",height:"100%"}),d=W("div",o,{position:"absolute",width:"100%",height:"100%",overflow:"hidden",overflowX:"auto"}),h=W("div",d,{position:"absolute",width:"100%",height:"100%"});O(d,function(){var s=javaxt.dhtml.utils.getRect(d),p=[],c=[],u=0,g=10;if(1<l.length){var m=[l,...e],y=P(m,g,s.width);p=y.suggestedWidths,u=y.headerWidth;for(var o,b=0;b<l.length;b++)o=l[b].length*g,150>o&&(o=150),c.push(o)}else p.push("100%"),c.push(null);for(var m=[],b=0;b<l.length;b++)m.push({header:l[b],width:p[b],minWidth:c[b],sortable:!1});s.width<u&&(h.style.width=u+"px"),n=new javaxt.dhtml.DataGrid(h,{columns:m,style:t.style.table,url:t.queryService,limit:t.pageSize,getResponse:function(e,i,l){i={query:a.getValue(),page:n.getCurrPage(),limit:t.pageSize,format:t.format},x(i,l)},parseResponse:function(e){return C(e.responseText).records},update:function(e,t){for(var l,a=0;a<t.length;a++)l=t[a],null===l||void 0===l?l="":(l.constructor===L||l.constructor===N)&&(l=JSON.stringify(l)),e.set(a,l)}}),n.beforeLoad=function(e){},n.afterLoad=function(){r.disable()},n.onSelectionChange=function(){},n.getColumns=function(){return l},n.getConfig=function(){return{columns:m}},n.load(e,1)})},T=function(e,i){return i.style=JSON.parse(JSON.stringify(t.style.toolbarButton)),i.icon&&(i.style.icon="toolbar-button-icon "+i.icon,delete i.icon),!0===i.menu&&(i.style.arrow="toolbar-button-menu-icon",i.style.menu="menu-panel",i.style.select="panel-toolbar-menubutton-selected"),new javaxt.dhtml.Button(e,i)},L=[].constructor,N={}.constructor,S=javaxt.dhtml.utils.get,E=javaxt.dhtml.utils.post,H=javaxt.dhtml.utils.delete,R=javaxt.dhtml.utils.clone,M=javaxt.dhtml.utils.merge,I=javaxt.dhtml.utils.destroy,O=javaxt.dhtml.utils.onRender,D=javaxt.dhtml.utils.addShowHide,B=javaxt.dhtml.utils.createTable,W=javaxt.dhtml.utils.createElement,P=javaxt.dhtml.utils.getSuggestedColumnWidths;(function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){t=R(t),t=M(t,u),o=t.waitmask,p=t.border;var l=W("div",e,t.style.container);c.el=l,D(c);var a=B(l),n=a.addRow(),s=n.addColumn(t.style.leftPanel);s.style.height="100%";var d=g(s),s=n.addColumn({height:"100%",width:"100%"}),r=b(s,d);m(r),O(c.el,function(){o&&o.show(500);var e=t.getTables;"string"==typeof e?S(e,{success:function(e){o&&o.hide();var t=JSON.parse(e).tables;i.addNodes(t)},failure:function(e){o&&o.hide(),alert(e)}}):"function"==typeof e&&e.apply(c,[i])})}})()},!javaxt)var javaxt={};if(javaxt.dhtml||(javaxt.dhtml={}),javaxt.dhtml.ThumbnailEditor=function(e,t){var n,s,o,d,r,l=Math.round,a=Math.min,h=this,i={thumbnailWidth:400,thumbnailHeight:400,mask:"circle",sliders:!0,readOnly:!1,style:{backgroundColor:"#000",uploadArea:{},toolbar:{padding:"10px 7px 0px"},slider:{groove:{},handle:{}}}},c=0,u=0,g=0,m=0,y=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){var l={};C(l,t),C(l,i),t=l,t.thumbnailWidth=parseInt(t.thumbnailWidth),isNaN(t.thumbnailWidth)&&(t.thumbnailWidth=i.thumbnailWidth),t.thumbnailHeight=parseInt(t.thumbnailHeight),isNaN(t.thumbnailHeight)&&(t.thumbnailHeight=i.thumbnailHeight),t.readOnly=!0===t.readOnly;var a=T("div",e,{display:"inline-block"});h.el=a;var n=L(a),s=n.addRow().addColumn({height:"100%",backgroundColor:t.style.backgroundColor});b(s),!1!==t.sliders&&f(n.addRow().addColumn())}};this.onChange=function(){},this.setImage=function(e){e&&(n.style.width="",n.style.height="",s&&o.clearRect(0,0,s.width,s.height),n.src=e,n.parentNode.className="")},this.getImage=function(e,i){e||(e="png"),"jpg"===e&&(e="jpeg");var l=c/parseFloat(n.style.width),a=u/parseFloat(n.style.height),s=-parseFloat(n.style.left)*l,d=-parseFloat(n.style.top)*a,r=t.thumbnailWidth*l,h=t.thumbnailHeight*a;try{var p=o.getImageData(s,d,r,h),g=T("canvas");g.width=r,g.height=h,g.getContext("2d").putImageData(p,0,0),v(g,t.thumbnailWidth,t.thumbnailHeight,!0);var m="image/"+e,y=g.toDataURL(m);return!0===i?y:(y=y.substring(("data:"+m+";base64,").length),x(y,m))}catch(t){return null}};var b=function(e){var i=Math.PI,l=T("div",e,t.style.uploadArea);if(l.style.width=t.thumbnailWidth+"px",l.style.height=t.thumbnailHeight+"px",l.style.position="relative",l.style.overflow="hidden",l.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",l.style.opacity="0.9"},!1),l.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),l.style.opacity="",n.style.width="",n.style.height="",s&&o.clearRect(0,0,s.width,s.height),h.onChange();var e=t.dataTransfer.files,i=e[0];if(i.type.match("image.*")){var a=new FileReader;a.onload=function(e){return function(t){var e=t.target.result;n.src=e,l.className=""}}(i),a.readAsDataURL(i)}},!1),n=T("img",l),n.style.position="absolute",n.style.top=0,n.style.left=0,N(n),n.hide(),n.onload=function(){n.style.top=0,n.style.left=0,c=n.width,u=n.height,g=n.width,m=n.height,w(),d.show(),t.readOnly||(d.style.cursor="grab"),s||(s=T("canvas"),o=s.getContext("2d")),s.width=c,s.height=u,o.drawImage(n,0,0),n.show(),r&&(r.setValue(0,!0),r.enable()),h.onChange()},d=T("canvas",l),d.style.position="absolute",d.style.top=0,d.style.left=0,d.width=t.thumbnailWidth,d.height=t.thumbnailHeight,N(d),d.hide(),"circle"===t.mask){var p=d.getContext("2d");p.fillStyle="rgba(0, 0, 0, 0.3)",p.fillRect(0,0,t.thumbnailWidth,t.thumbnailHeight);var y=t.thumbnailWidth/2,b=t.thumbnailHeight/2,f=a(t.thumbnailWidth,t.thumbnailHeight)/2;p.beginPath(),p.fillStyle="rgba(0, 0, 0, 1)",p.globalCompositeOperation="destination-out",p.arc(y,b,f,0,2*i),p.fill(),p.globalCompositeOperation="source-over"}var v=0,C=0,k=0,L=0;E(d,{onDragStart:function(e,i){t.readOnly||(d.style.cursor="grabbing",k=parseInt(n.style.left),L=parseInt(n.style.top),v=e,C=i)},onDrag:function(e,i){t.readOnly||(n.style.left=k+(e-v)+"px",n.style.top=L+(i-C)+"px")},onDragEnd:function(){t.readOnly||(d.style.cursor="grab",h.onChange())}})},f=function(e){var i=T("div",e);k(i,t.style.toolbar),r=new javaxt.dhtml.Slider(i,{units:"percent",value:0,disabled:!0,style:t.style.slider});var s;r.onChange=function(){s&&cancelTimeout(s);var e=r.getValue()/100,t=g+(c-g)*e,i=m+(u-m)*e;t=a(l(t),c),i=a(l(i),u),n.style.width=t+"px",n.style.height=i+"px",setTimeout(function(){h.onChange()},200)}},w=function(){var e=function(){var e=t.thumbnailWidth/g;g*=e,m*=e},i=function(){var e=t.thumbnailHeight/m;g*=e,m*=e};t.thumbnailHeight<t.thumbnailWidth?(i(),g>t.thumbnailWidth&&e()):(e(),m>t.thumbnailHeight&&i()),n.style.width=g+"px",n.style.height=m+"px"},v=function(e,t,a,n){var s=Math.sqrt,o=Math.abs,d=Math.floor,r=Math.ceil,h=e.width,p=e.height;t=l(t),a=l(a);for(var c=h/t,u=p/a,g=r(c/2),m=r(u/2),y=e.getContext("2d"),b=y.getImageData(0,0,h,p),f=y.createImageData(t,a),v=b.data,x=f.data,C=0;C<a;C++)for(var k=0;k<t;k++){for(var T=4*(k+C*t),L=0,N=0,S=0,E=0,H=0,R=0,M=0,I=(C+.5)*u,O=d(C*u),D=r((C+1)*u),B=O;B<D;B++)for(var W=o(I-(B+.5))/m,P=(k+.5)*c,z=W*W,A=d(k*c),V=r((k+1)*c),F=A;F<V;F++){var q=o(P-(F+.5))/g,U=s(z+q*q);if(!(1<=U)){L=2*U*U*U-3*U*U+1;var J=4*(F+B*h);M+=L*v[J+3],S+=L,255>v[J+3]&&(L=L*v[J+3]/250),E+=L*v[J],H+=L*v[J+1],R+=L*v[J+2],N+=L}}x[T]=E/N,x[T+1]=H/N,x[T+2]=R/N,x[T+3]=M/S}!0===n?(e.width=t,e.height=a):y.clearRect(0,0,h,p),y.putImageData(f,0,0)},x=function(e,t){t=t||"";for(var l=1024,a=window.atob(e),n=[],s=0,o=a.length;s<o;s+=l){for(var d=a.slice(s,s+l),r=Array(d.length),h=0;h<d.length;h++)r[h]=d.charCodeAt(h);var p=new Uint8Array(r);n.push(p)}return new Blob(n,{type:t})},C=javaxt.dhtml.utils.merge,k=javaxt.dhtml.utils.setStyle,T=javaxt.dhtml.utils.createElement,L=javaxt.dhtml.utils.createTable,N=javaxt.dhtml.utils.addShowHide,S=javaxt.dhtml.utils.isNumber,E=javaxt.dhtml.utils.initDrag,H=javaxt.dhtml.utils.getRect;y()},!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.FileBrowser=function(e,t){var i=Math.round;this.className="javaxt.express.FileBrowser";var l,a,n,s,o,d=this,r={fileService:"files/",pageSize:300,foldersOnly:!1,title:null,width:600,height:450,modal:!0,closable:!0,footer:null,columns:[{header:"Name",field:"name",width:"100%",sortable:!0},{header:"Date",field:"date",width:"135px",align:"left",sortable:!0},{header:"Type",field:"type",width:"100px",sortable:!0},{header:"Size",field:"size",width:"80px",align:"right",sortable:!0}],style:{window:{panel:"window",header:"window-header",button:"window-header-button",title:"window-title",body:{padding:"0px",verticalAlign:"top"}},toolbar:{panel:"panel-toolbar",button:{},icons:{back:"backIcon",forward:"nextIcon",up:"upIcon",refresh:"refreshIcon"},path:"form-input",pathItem:""},addressBarItem:{},table:{},info:{height:"20px"},leftPanel:{background:"#272a31",borderRight:"1px solid #383b41"},tree:{padding:"7px 0 7px 0px",backgroundColor:"",li:"tree-node"},centerPanel:{width:"100%",height:"100%"}},renderers:{iconRenderer:null,nameRenderer:null,dateRenderer:null,typeRenderer:null,sizeRenderer:null}},h={},p={},c=[],u="\\",g=0,m=0,y=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){t=P(t),t=z(t,r);var i=j("div",{width:"100%",height:"100%",position:"relative"});F(i),d.el=i,o=new javaxt.express.WaitMask(i);var a,n=V(i);if(a=n.addRow().addColumn(),b(a),a=n.addRow().addColumn(),a.style.height="100%",v(a),e===document.body)for(var s in l=new javaxt.dhtml.Window(e,{title:t.title,width:t.width,height:t.height,modal:t.modal,closable:t.closable,footer:t.footer,style:t.style.window,body:i}),l)"function"==typeof l[s]&&null==d[s]&&(d[s]=l[s]);else e.appendChild(i)}};this.clear=function(){a.clear(),n.clear(),c=[],Object.keys(p).forEach(e=>{delete p[e]}),Object.values(h).forEach(e=>{e.disable()}),g=0,m=0},this.refresh=function(){a.refresh()},this.setSort=function(e,t){var i=a.getFilter();e?(!t&&(t=""),i.orderby=e+" "+t):delete i.orderby,a.setFilter(i)},this.setDirectory=function(e){a.clear(),e=null==e?"":e.trim(),0==e.length?h.up.disable():h.up.enable(),p.path=e,p.hidden=!1,p.foldersOnly=t.foldersOnly,a.load(),c.push(e),n.update(e)},this.getDirectory=function(){var e=p.path;if(e&&0<e.length){var t="/";-1<e.indexOf("\\")&&(t="\\"),e.substring(e.length-1)!=t&&(e+=t)}return e},this.onDirectoryChange=function(e){},this.onClick=function(t,i,l,a){},this.onDoubleClick=function(t,i,l,a){},this.onSelectionChange=function(){},this.getSelectedItems=function(){for(var e=a.getSelectedRecords(),t=0;t<e.length;t++)e[t]=x(e[t]);return e},this.getGrid=function(){return a};var b=function(e){A(e,t.style.toolbar.panel);var i=V(e).addRow();f(i.addColumn()),w(i.addColumn({width:"100%"}))},f=function(e){var i,l=V(e).addRow();i=l.addColumn();var a=D(i,{label:"",icon:t.style.toolbar.icons.back,disabled:!0});a.onClick=function(){},i=l.addColumn();var n=D(i,{label:"",icon:t.style.toolbar.icons.forward,disabled:!0});n.onClick=function(){},i=l.addColumn();var o=D(i,{label:"",icon:t.style.toolbar.icons.up,disabled:!0});o.onClick=function(){if(s&&0!==s.length){var e=I(s,!0),t=e.lastIndexOf("/"),i=s.substring(0,t+1);-1<I(i).indexOf("/")?d.setDirectory(i):d.setDirectory("")}},h.up=o},w=function(e){var i=V(e).addRow(),l=i.addColumn();l.style.width="100%";var o=j("div",l);A(o,t.style.toolbar.path),o.style.position="relative",o.style.width="100%";var r=j("div",o);r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.overflow="hidden",r.style.whiteSpace="nowrap";var h=j("div",r);h.style.position="absolute",h.style.height="100%",h.style.overflow="hidden",h.style.whiteSpace="nowrap",n={clear:function(){h.innerHTML=""},update:function(e){if(h.innerHTML="",e=I(e,!0),0!=e.length)for(var l,a=e.split("/"),n=0;n<a.length;n++)l=j("div",h),A(l,t.style.addressBarItem),l.style.display="inline-block",l.innerHTML=a[n]+u,r.scrollLeft=h.clientWidth,l.onclick=function(){for(var e,t="",l=0;l<h.childNodes.length&&(e=h.childNodes[l],t+=e.innerHTML,e!=this);l++);t!=I(s,!0)&&d.setDirectory(t)}}};var p=D(i.addColumn(),{label:"",icon:t.style.toolbar.icons.refresh,disabled:!1});p.onClick=function(){a.refresh()}},v=function(e){var i,l=V(e);i=l.addRow().addColumn(),A(i,t.style.centerPanel),a=new javaxt.dhtml.DataGrid(i,{columns:t.columns,style:t.style.table,url:t.fileService,limit:t.pageSize,params:p,post:!0,parseResponse:function(e){var t=JSON.parse(e.responseText);return s=t.dir,d.onDirectoryChange(d.getDirectory()),u=t.pathSeparator,g=t.count,m=t.size,t.items},update:function(e,t){var i=x(t);e.set("Name",T(i)),e.set("Date",N(i)),e.set("Type",E(i)),e.set("Size",S(i))}}),i=l.addRow().addColumn(),A(i,t.style.info);var n=j("div",i,{position:"relative",height:"100%"});n=j("div",n,{position:"absolute"});var r=j("div",n);r.style.display="inline-block";var h=j("div",n);h.style.display="inline-block",h.style.marginLeft="7px";var c=a.clear;a.clear=function(){r.innerHTML="",h.innerHTML="",c()},a.beforeLoad=function(e){o.show(500),r.innerHTML="",h.innerHTML=""},a.onLoad=function(){o.hide(),r.innerHTML=g+" items",0<m&&(h.innerHTML=H(m))},a.onError=function(e){o.hide(),alert(e)},a.onSelectionChange=function(){d.onSelectionChange()},a.onRowClick=function(t,i){var e,l=x(t.record);e=s?s+l.name:l.name,2===i.detail?d.onDoubleClick(l,e,t,i):d.onClick(l,e,t,i)}},x=function(e){return{name:e[0],type:e[1],date:new Date(e[2]),size:e[3]}},C=function(e){return O(e,"name",function(){return e.name})},k=function(e){return O(e,"icon",function(){return null})},T=function(e){var t=C(e),i=k(e);if(i){var l=j("div"),a=j("div",l);a.style.display="inline-block",L(i,a);var a=j("div",l);return a.style.display="inline-block",L(t,a),l}return t},L=function(e,t){if(null==e||"undefined"==typeof e)t.innerHTML="";else if("string"==typeof e||!isNaN(parseFloat(e)))t.innerHTML=e;else{t.innerHTML="";try{t.appendChild(e)}catch(t){}}},N=function(e){return O(e,"date",function(){var t=e.date;return"Drive"==e.type?"":R(t)})},S=function(e){return O(e,"size",function(){var t=e.size;return"Folder"==e.type||"Drive"==e.type?"":H(t)})},E=function(e){return O(e,"type",function(){return e.type})},H=function(e){return 0<e&&(e/=1024,1>=e?e="1 KB":(e/=1024,e=1>=e?"1 MB":i(e)+" MB")),e},R=function(e){var t=e.getHours();0==t?t=12:12<t&&(t-=12);var i=12>e.getHours()?"AM":"PM",l=e.getMinutes();return 10>l&&(l="0"+l),e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+t+":"+l+" "+i},M=function(e){},I=function(e,t){return e=e.replace(/\\/g,"/"),!0===t&&"/"===e.substring(e.length-1)&&(e=e.substring(0,e.length-1)),e},O=function(e,i,l){var a=i+"Renderer";return t.renderers[a]?t.renderers[a](e):l.call()},D=function(e,i){return i.style=JSON.parse(JSON.stringify(t.style.toolbar.button)),i.icon&&(i.style.icon="toolbar-button-icon "+i.icon,delete i.icon),new javaxt.dhtml.Button(e,i)},B=javaxt.dhtml.utils.post,W=javaxt.dhtml.utils.delete,P=javaxt.dhtml.utils.clone,z=javaxt.dhtml.utils.merge,A=javaxt.dhtml.utils.setStyle,j=javaxt.dhtml.utils.createElement,V=javaxt.dhtml.utils.createTable,F=javaxt.dhtml.utils.addShowHide;y()},!javaxt)var javaxt={};javaxt.express||(javaxt.express={}),javaxt.express.Facet=function(e,t){this.className="javaxt.express.Facet";var l,a=this,n=0,s={title:"Title",style:{panel:{backgroundColor:"#e1f2ff",marginBottom:"8px"},header:{backgroundColor:"#b0d4f3",color:"#003a92",padding:"4px 8px"},body:{padding:"4px 8px"},label:{fontSize:"12px",color:"#3e3e3e",whiteSpace:"nowrap",cursor:"pointer",padding:"1px 0 0 5px"},checkbox:{width:"13px",height:"13px",border:"1px solid #cccccc",borderRadius:"3px",background:"#F6F6F6",cursor:"pointer",margin:"0px",color:"#2b2b2b"},checkmark:{content:"",display:"block",width:"4px",height:"7px",border:"solid #ffffff",borderWidth:"0 2px 2px 0",transform:"rotate(45deg)",margin:"1px 0 0 4px"}},sort:{field:"name",direction:"desc"}},o=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){t=d(t,s),t.filter||(t.filter={}),t.key||(t.key=t.title);var i=document.createElement("div");r(i,t.style.panel);var a=document.createElement("div");r(a,t.style.header),"string"==typeof t.title?a.innerHTML=t.title:a.appendChild(t.title),i.appendChild(a),l=document.createElement("div"),r(l,t.style.body),i.appendChild(l),e.appendChild(i)}};this.onChange=function(){},this.getTitle=function(){return t.title},this.getKey=function(){return t.key},this.clear=function(){l.innerHTML=""},this.getBody=function(){return l},this.getNumOptions=function(){return n},this.update=function(e){a.clear();var s=t.getLabel,o=t.key,d=[];for(var r in e)e.hasOwnProperty(r)&&d.push({label:r,count:e[r]});if(n=d.length,t.sort){var h=t.sort.field,p=t.sort.direction;"name"==h?(null==p&&(p="asc"),d.sort(function(e,t){var i=e.label.toLowerCase(),l=t.label.toLowerCase();if("desc"==p){if(i<l)return 1;if(i>l)return-1}else{if(i<l)return-1;if(i>l)return 1}return 0})):"count"==h&&(null==p&&(p="desc"),d.sort(function(e,t){var i=e.count,l=t.count;if("desc"==p){if(i<l)return 1;if(i>l)return-1}else{if(i<l)return-1;if(i>l)return 1}return 0}))}for(var e=d,c=0;c<e.length;c++){var u=e[c],g=u.count,m=u.label;s&&(m=s(m));var y=!1;if(t.filter[o])for(var d=t.filter[o].split(","),b=0;b<d.length;b++)if(d[b]==u.label+""){y=!0;break}var f=document.createElement("div"),w=new javaxt.dhtml.Checkbox(f,{label:m+" ("+g+")",value:u.label,checked:y,display:"table",style:{label:t.style.label,box:t.style.checkbox,check:t.style.checkmark}});w.filterName=o,w.onClick=function(e){var l=this.filterName,n=this.getValue()+"",s=t.filter[l];if(e){if(s){for(var o=!0,d=s.split(","),r=0;r<d.length;r++)if(d[r]==n){o=!1;break}o&&(t.filter[l]+=","+n)}else t.filter[l]=n;}else if(s){for(var h="",d=s.split(","),r=0;r<d.length;r++)d[r]!=n&&(0<h.length&&(h+=","),h+=d[r]);0<h.length?t.filter[l]=h:delete t.filter[l]}a.onChange(t.filter[l])},l.appendChild(f)}};var d=javaxt.dhtml.utils.merge,r=javaxt.dhtml.utils.setStyle;o()};var confirm=function(e,t){return javaxt.dhtml.utils.confirm(e,t),!1};if(!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.ActivityMeter=function(e,t){var l,a,n=this,i={maxIdleTime:300000,lineGraph:{refeshRate:500},userChart:{}},s={},o={},d=function(){t=b(t,i),t.style||(t.style=javaxt.dhtml.style.default);var l=u("div",e,"user-stats"),a=g(l),s=a.addRow();r(s.addColumn({width:"100%",height:"100%",padding:"20px"})),h(s.addColumn({padding:"20px",height:"100%"})),n.el=l,m(n)};this.notify=function(e,t,i,l){var a=p(),n=s[a];s[a]=n?n+1:1},this.clear=function(){l&&(l.stop(),l.clear()),a&&(a.stop(),a.clear())},this.update=function(e){o=e,l&&l.start(),a&&a.start()};var r=function(e){var i=u("div",e,{width:"100%",height:"100%"});y(i,function(){var e=d3.select(i);const a=e.node().getBoundingClientRect(),n=d3.scaleLinear().domain([0,100]).range([0,a.width]),o=d3.scaleLinear().domain([0,10]).range([a.height,0]);var d=Array(100).fill(0);l=e.append("svg").attr("width","100%").attr("height","100%");const r=d3.line().curve(d3.curveBasis).x((e,t)=>n(t)).y(e=>o(e));l.append("path").attr("d",r(d)).style("stroke","#777").style("stroke-width",1).style("fill","none"),l.start=function(){l.stop(),l.interval=setInterval(function(){var e=p(),t=s[e];t||(t=0),delete s[e],d.pop(),d.unshift(t);var a="#777";for(var n in d)if(0<d[n]){a="#6699CC";break}l.selectAll("path").data([d]).attr("d",r).style("stroke",a)},t.lineGraph.refeshRate)},l.stop=function(){clearInterval(l.interval)},l.clear=function(){d=Array(100).fill(0),l.selectAll("path").data([d]).attr("d",r)},l.start()})},h=function(e){var i=u("div",e,{width:"350px",height:"100%"});y(i,function(){var e=i.offsetWidth,l=i.offsetHeight,n=Math.min(e,l)/2,s=.65,d=n*s,r=d3.arc().innerRadius(d).outerRadius(n);a=d3.select(i).append("svg").attr("width","100%").attr("height","100%").append("g").attr("transform","translate("+e/2+","+l/2+")");var h=d3.pie().value(function(e){return e.value}),p=a.append("text").attr("text-anchor","middle").attr("font-size","4em").attr("y",20),c=function(e){var l=d3.interpolate(this._current,e);return this._current=l(0),function(e){return r(l(e))}},u=function(){var e=[];for(var i in o){var l=new Date(o[i]).getTime(),a=new Date().getTime(),n=a-l;e.push({key:i,value:t.maxIdleTime-n})}return e},g=d3.scaleOrdinal(d3.schemeCategory10),m=function(e){var t=Object.keys(e).length;p.text(t+""),0===t&&e.push({key:"-1",value:1});var i=h(e);a.selectAll("path").data(i).transition().duration(100).attrTween("d",c),a.selectAll("path").data(i).enter().append("path").attr("d",r).attr("fill",function(e,t){return"-1"===e.data.key?"#dcdcdc":g(e.data.key)}).style("opacity",.8).each(function(e){this._current=e}),a.selectAll("path").data(i).exit().remove()};a.start=function(){a.stop(),a.interval=setInterval(function(){var e=[];for(var l in o){var a=o[l],n=new Date().getTime(),s=n-a;s>t.maxIdleTime&&e.push(l)}for(var d in e){var r=e[d];delete o[r]}m(u())},1e3)},a.stop=function(){clearInterval(a.interval)},a.clear=function(){m([])},a.start()})},p=function(){var e=new Date;return e.getUTCFullYear()+c(e.getUTCMonth()+1)+c(e.getUTCDate())+c(e.getUTCHours())+c(e.getUTCMinutes())},c=function(e){return 9>e?"0"+e:e+""},u=javaxt.dhtml.utils.createElement,g=javaxt.dhtml.utils.createTable,m=javaxt.dhtml.utils.addShowHide,y=javaxt.dhtml.utils.onRender,b=javaxt.dhtml.utils.merge;d()},!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.SearchField=function(e,t){this.className="javaxt.express.SearchField";var i=this,l={};if(javaxt.dhtml.style&&javaxt.dhtml.style.default){var a=javaxt.dhtml.style.default.combobox;a&&(l=a)}var n,s,o={url:"/search",searchDelay:500,style:l,onButtonClick:function(){},debugr:null},d=0,r=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){var l={};for(var a in g(l,t),g(l,o),t=l,t)t.hasOwnProperty(a)&&"function"==typeof t[a]&&i[a]&&"function"==typeof i[a]&&(i[a]=t[a]);n=new javaxt.dhtml.ComboBox(e,{maxVisibleRows:6,showMenuOnFocus:!1,style:t.style}),n.filter=function(){},n.getButton().onclick=t.onButtonClick;var r;n.onChange=function(e,l){l&&i.onSelect(),r&&clearTimeout(r),r=setTimeout(function(){l||p()},t.searchDelay)};var h=i.el=n.el;h.addEventListener("focusout",function(){r&&clearTimeout(r),s&&s.close(),d=0})}};this.getValue=function(){return n.getValue()},this.setValue=function(e,t){n.setValue(e,t)},this.onSelect=function(){},this.clear=function(){n.clear()},this.getInput=function(){return n.getInput()},this.createFilter=function(e){return e},this.parseResponse=function(e){return[]};var h=function(){u("sendQuery");var e=n.getText().trim();if(0!==e.length){var t=i.createFilter(e);t&&s.send(t)}},p=function(){u("search"),n.removeAll(),s&&0!==d?3===d&&h():c()},c=function(){d=1;var e=window.location.protocol.toLowerCase();e=0===e.indexOf("https")?"wss":"ws";var i=e+"://"+window.location.host;0!=t.url.indexOf("/")&&(i+="/"),i+=t.url,u(i),s=new WebSocket(i),s.onopen=function(e){u("onopen"),d=2},s.onclose=function(e){u("onclose",e.code,e.reason),d=0},s.onerror=function(e){u("onerror")},s.onmessage=function(e){var i=e.data;if(u(i),"Ready!"===i)d=3,h();else{var l=t.parseResponse(i);try{l.forEach(e=>{if(m(e)){var t=e[0],i=e[1];n.add(t,i)}});var a=n.getOptions();u(a),0<a.length&&n.showMenu()}catch(t){}}}},u=function(e){var i=t.debugr;i&&i.append&&i.append(e)},g=javaxt.dhtml.utils.merge,m=javaxt.dhtml.utils.isArray;r()},!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.WaitMask=function(e,t){var i,l,a,n,s=this,o=!1,d={style:{mask:"waitmask",spinner:{size:"50px",lineWidth:3}}},r=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){var l={};p(l,t),p(l,d),t=l,i=document.createElement("div"),i.className=t.style.mask,i.style.opacity=0,c(i),i.hide(),e.appendChild(i),s.el=i}};this.show=function(e){o||(e=parseInt(e),a&&clearTimeout(a),!isNaN(e)&&0<e?a=setTimeout(h,e):h())};var h=function(){i.style.zIndex=u(),i.show(),i.style.opacity="",i.innerHTML="",l=new javaxt.express.Spinner(i,t.style.spinner),l.show(),o=!0};this.hide=function(){a&&clearTimeout(a),i.style.zIndex="",i.style.opacity=0,n=setTimeout(function(){i.hide(),i.innerHTML="",o=!1},1500)};var p=javaxt.dhtml.utils.merge,c=javaxt.dhtml.utils.addShowHide,u=javaxt.dhtml.utils.getNextHighestZindex;r()},!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.FileUploader=function(e,t){this.className="javaxt.express.FileUploader";var i,l=this,a={uploadService:"upload",maxUploads:1,title:"File Upload",width:600,height:450,modal:!0,closable:!0,footer:null,style:{panel:"window",header:"window-header",button:"window-header-button",title:"window-title",body:"window-body",uploadArea:{border:"2px dashed #bbb",borderRadius:"5px",padding:"25px",margin:"25px",textAlign:"center",fontSize:"20pt",fontWeight:"bold",color:"#bbb",backgroundColor:"#f8f8f8",height:"200px"},centerPanel:{width:"100%",height:"100%",background:"#fff"},table:{},info:{height:"20px"}},renderers:{}},n=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){t=p(t),t=c(t,a);var n,d,r=g(),h=r.firstChild;for(var u in n=document.createElement("tr"),h.appendChild(n),d=document.createElement("td"),n.appendChild(d),s(d),n=document.createElement("tr"),h.appendChild(n),d=document.createElement("td"),n.appendChild(d),t.body=r,i=new javaxt.dhtml.Window(e,t),i)"function"==typeof i[u]&&null==l[u]&&(l[u]=i[u]);l.el=i.el,l.el.addEventListener("dragover",o,!1),l.el.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault();var e=t.dataTransfer.files;l.upload(e)},!1)}};this.accept=function(e){return!0},this.upload=function(e){for(var a,n=[],s=0;s<e.length;s++)a=e[s],!0===l.accept(a)&&n.push(a);var o=0,d=n.length,r=function(){if(0!=n.length){var e=n.shift(),i=new FormData;i.append(e.name,e),h(t.uploadService,i,{success:function(e){o++,r()},failure:function(e){o++,r()}})}};r()};var s=function(e){var i=document.createElement("div");u(i,t.style.uploadArea),e.appendChild(i);var a=document.createElement("input");a.type="file",a.style.display="none",a.onchange=function(){l.upload(this.files)},i.appendChild(a);var n=document.createElement("span");n.innerHTML="Drag and drop files or ",i.appendChild(n);var s=document.createElement("a");s.href="#",s.innerHTML="browse",s.onclick=function(t){t.preventDefault(),a.click()},i.appendChild(s)},o=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},d=function(e){var t,i,l=g(),a=l.firstChild;t=document.createElement("tr"),a.appendChild(t),i=document.createElement("td"),t.appendChild(i),createNav(i),i=document.createElement("td"),i.style.width="100%",t.appendChild(i),createGrid(i),e.appendChild(l)},r=function(e,t){if(null==e||"undefined"==typeof e)t.innerHTML="";else if("string"==typeof e||!isNaN(parseFloat(e)))t.innerHTML=e;else{t.innerHTML="";try{t.appendChild(e)}catch(t){}}},h=javaxt.dhtml.utils.post,p=javaxt.dhtml.utils.clone,c=javaxt.dhtml.utils.merge,u=javaxt.dhtml.utils.setStyle,g=javaxt.dhtml.utils.createTable;n()},!javaxt)var javaxt={};if(javaxt.express||(javaxt.express={}),javaxt.express.Spinner=function(e,t){var i=this,l={style:"spinner",size:"25px",lineWidth:6},a=function(){if("string"==typeof e&&(e=document.getElementById(e)),!!e){var a={};n(a,t),n(a,l),t=a,t.size=parseInt(t.size)+"px",t.lineWidth=parseInt(t.lineWidth)+"";var s=document.createElement("div");s.className=t.style,s.style.width=t.size,s.style.height=t.size,s.style.display="inline-block";var o="http://www.w3.org/2000/svg",d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("width",t.size),d.setAttribute("height",t.size),d.setAttribute("viewBox","0 0 66 66"),s.appendChild(d);var r=document.createElementNS("http://www.w3.org/2000/svg","circle");r.setAttribute("fill","none"),r.setAttribute("stroke-width",t.lineWidth),r.setAttribute("stroke-linecap","round"),r.setAttribute("cx","33"),r.setAttribute("cy","33"),r.setAttribute("r","30"),d.appendChild(r),e.appendChild(s),i.el=s}};this.show=function(){setTimeout(function(){i.el.style.display="",i.el.style.opacity=1,i.el.childNodes[0].style.opacity=1},50)},this.hide=function(){i.el.style.opacity=0,i.el.childNodes[0].style.opacity=0,setTimeout(function(){i.el.style.display="none"},500)};var n=javaxt.dhtml.utils.merge;a()},!javaxt)var javaxt={};javaxt.express||(javaxt.express={}),javaxt.express.WebSite=function(content,config){var _Mathmax=Math.max,_Mathround3=Math.round;this.className="javaxt.express.WebSite";var tabs,carousel,currPage,nextPage,slideIndex,timer,me=this,defaultConfig={tabs:[],navbar:null,sidebar:null,minContentHeight:600,padding:20,animationSteps:600,fx:null,style:{panel:{background:"#fff",height:""}}},pageLoader=new javaxt.dhtml.PageLoader,scrollUp=!1,debug=!1,init=function(){var e={};merge(e,config),merge(e,defaultConfig),config=e,config.fx||(config.fx=new javaxt.dhtml.Effects),tabs=config.tabs;for(var t=[],l=0;l<tabs.length;l++){var a=getPath(tabs[l].pathname),n=getDir(a),s=tabs[l].getElementsByTagName("div")[0];t.push({dir:n,div:s})}tabs=t;var a=getPath(window.location.pathname);me.updateTabs(a),me.updateNav(a),me.updateSidebar(a);var o=document.getElementsByTagName("a");me.updateLinks(o),"undefined"==typeof CodeMirror?"undefined"!=typeof SyntaxHighlighter&&(SyntaxHighlighter.defaults["class-name"]="code-block",SyntaxHighlighter.defaults.toolbar=!1,SyntaxHighlighter.defaults.gutter=!1,highlight(content)):highlight(content);var d=content.offsetHeight,r=parseFloat(config.minContentHeight);isNaN(r)||(d=_Mathmax(d,r)),content.style.height=d+"px",currPage=document.createElement("div"),currPage.style.height="100%";var h=document.createElement("div");for(setStyle(h,config.style.panel),currPage.appendChild(h);0<content.childNodes.length;){var p=content.childNodes[0];content.removeChild(p),h.appendChild(p)}if(nextPage=document.createElement("div"),nextPage.style.height="100%",carousel=new javaxt.dhtml.Carousel(content,{items:[currPage,nextPage],drag:!1,loop:!0,padding:config.padding,animationSteps:config.animationSteps,transitionEffect:"easeInOutCubic",fx:config.fx,onRender:function(){}}),carousel.beforeChange=function(e,t){e.style.opacity=0,t.style.opacity=0,timer&&clearInterval(timer),updateContent(t);var i=getPath(window.location.pathname);me.updateTabs(i),me.updateNav(i),me.updateSidebar(i),dispatchEvent("beforeunload")},carousel.onChange=function(e,t){currPage=e,nextPage=t,config.fx?config.fx.fadeIn(e,"easeInCubic",300):e.style.opacity=1;var i=0;if(0<config.animationSteps&&(i=100),scrollUp)if(scrollUp=!1,50<getScrollPosition()&&0<i){var l=1e3;scrollTop(new Date().getTime(),1000,1000,function(){resize(e,i)})}else setScrollPosition(0);timer=setInterval(function(){resize(e,i)},250),t.innerHTML="",dispatchEvent("load")},carousel.onResize=function(){dispatchEvent("resize")},window.addEventListener("resize",function(t){resize(currPage)}),dispatchEvent("resize"),window.addEventListener("popstate",popstateListener),log(window.history.state),null==window.history.state){slideIndex=0;var c={index:slideIndex,title:document.title};history.replaceState(c,null,"")}else slideIndex=window.history.state.index;log("slideIndex: "+slideIndex)},popstateListener=function(t){var e=t.state;if(log(e),document.title=e.title,!nextPage)return void console.error("nextPage is null in popstateListener");var i=window.location;getHTML(i,function(t,i,l){nextPage.innerHTML=t,loadInlineScripts(l),slideIndex>=e.index?(carousel.back(),slideIndex=e.index):slideIndex<e.index?(carousel.next(),slideIndex=e.index):log(slideIndex+" vs "+e.index)})};this.enablePopstateListener=function(){me.disablePopstateListener(),window.addEventListener("popstate",popstateListener)},this.disablePopstateListener=function(){window.removeEventListener("popstate",popstateListener)},this.beforeResize=function(){},this.onResize=function(){};var resize=function(e,t){var i=_getRect(e.parentNode),l=getFirstChild(e);l&&(e=l);var a=_getRect(e),n=a.height+(a.top-i.top),s=parseFloat(content.style.height),o=parseFloat(config.minContentHeight);isNaN(o)||(n=_Mathmax(n,o));n===s||(me.beforeResize(),t||(t=0),0<t?_resize(s,n,new Date().getTime(),t,me.onResize):(content.style.height=n+"px",me.onResize()))},_resize=function(e,t,i,l,a,n){var s=new Date().getTime(),o=s-i;if(l<=o)return content.style.height=t+"px",void(n&&n.apply(me,[]));l-=o;var r=e-t,d=1-l/a,h=_Mathround3(d*r);content.style.height=e-h+"px",setTimeout(function(){_resize(e,t,s,l,a,n)},33)},scrollTop=function(e,t,i,l){var a=new Date().getTime(),n=a-e;if(t<=n)return setScrollPosition(0),void(l&&l.apply(me,[]));t-=n;var s=getScrollPosition(),o=s,d=1-t/i,r=_Mathround3(d*o);setScrollPosition(s-r),setTimeout(function(){scrollTop(a,t,i,l)},33)},getScrollPosition=function(){return window.scrollY},setScrollPosition=function(e){window.scrollTo(0,e)};this.setContentHeight=function(e){content.style.height=e};var highlight=function(e){for(var t=[],l=e.getElementsByTagName("pre"),a=0;a<l.length;a++){for(var n=l[a],s=!0,o=n.parentNode;null!=o;){if("pre"===o.nodeName.toLowerCase()){s=!1;break}o=o.parentNode}s&&t.push(n)}if("undefined"!=typeof CodeMirror)for(var a=0;a<t.length;a++){var n=t[a],d=n.innerText.replace(/\s+$/,""),r=n.getAttribute("language");if(!r&&n.className){var p=n.className.indexOf("brush:");-1<p&&(r=n.className.substring(p+6),p=r.indexOf(";"),-1<p&&(r=r.substring(0,p)),r=r.replace(/^\s*/,"").replace(/\s*$/,""))}r||(r="java"),"js"==r&&(r="javascript"),"java"==r&&(r="text/x-java");var c=n.getAttribute("lineNumbers");c="true"===c;var u=d.split("\n").length,g=function(e,t,i,l,a){var n=CodeMirror(e,{mode:i,lineNumbers:l,readOnly:!0,value:t});n.setSize("100%","100%"),a&&a.apply(this,[e,n])};if(250>u)n.innerHTML="",g(n,d,r,c);else{var m=parseFloat(n.offsetHeight),y=m/u;m+=y,n.style.opacity=0,n.innerHTML="",n.style.height=m+"px",setTimeout(g,200,n,d,r,c,function(e){config.fx.fadeIn(e,"easeInCubic",300)})}}else if("undefined"!=typeof SyntaxHighlighter){for(var n,b=!1,a=0;a<t.length;a++)n=t[a],""==n.className&&(n.className="brush: java;"),b=!0;b&&SyntaxHighlighter.highlight()}};this.updateLinks=function(e){for(var t=0;t<e.length;t++)if(e[t].hostname==window.location.hostname){var l=function(t){var e=this.href;if(window.location==e)return void t.preventDefault();var i=e.substring(e.indexOf(this.pathname)+this.pathname.length);if(0==i.indexOf("#"))return void t.preventDefault();var l=getPath(this.pathname),a=getDir(l);me.updateLink(e,l,a)&&(t.preventDefault(),getHTML(e,function(t,i,l){load(t,i,e,a,l)}))};e[t].onclick=l}};var load=function(e,t,l,n,s){var o=me.getTab(n);if(o){var d=getPath(window.location.pathname),r=getDir(d),h=me.getTab(r);if(!nextPage)return void console.error("nextPage is null in load");if(!currPage)return void console.error("currPage is null in load");document.title=t,history.pushState(null,t,l),scrollUp=!0;var p=o.dir!=h.dir;if(p=!0,!p)currPage.innerHTML=e,updateContent(currPage);else{nextPage.innerHTML=e;for(var c,u,g,m=0;m<tabs.length;m++)g=tabs[m].dir,g==h.dir&&(c=m),g==o.dir&&(u=m);if(log(c+" "+u),c==u){var g=getPath(window.location.pathname);0==g.indexOf(d)?(u=1,c=0):log(d+" vs "+g)}u>c?(slideIndex++,carousel.next()):(slideIndex--,carousel.back())}loadInlineScripts(s);var y={index:slideIndex,title:t};history.replaceState(y,t,l)}},loadInlineScripts=function(inlineScripts){for(var script,i=0;i<inlineScripts.length;i++)script=inlineScripts[i].firstChild.nodeValue,eval(script)},dispatchEvent=function(t){var i;try{i=new Event(t)}catch(l){i=document.createEvent("Event"),i.initEvent(t,!1,!1)}0<config.animationSteps?window.dispatchEvent(i):setTimeout(function(){window.dispatchEvent(i)},50)};me.getTabs=function(){return tabs},me.getTab=function(e){for(var t=0;t<tabs.length;t++)if(tabs[t].dir==e)return tabs[t];return null},this.updateLink=function(e,t,i){if("downloads"==i||"images"==i){var l=t.lastIndexOf(".");if(5>t.length-l)return!1}return!0},this.updateTabs=function(e){e||(e=getPath(window.location.pathname));for(var t=getDir(e),l=me.getTab(t),a=0;a<tabs.length;a++)tabs[a].div.className="";l&&(l.div.className="active")},this.updateNav=function(e){if(config.navbar){config.navbar.innerHTML="",e||(e=getPath(window.location.pathname)),e.lastIndexOf("/")===e.length-1&&(e=e.substring(0,e.length-1));var t=e.split("/");config.navbar.style.height=0===t.length||""===t[0]?"0px":"";for(var l,a=0;a<t.length;a++)l=document.createElement("div"),l.innerText=t[a].split("_").join(" "),a<t.length-1&&(l.path=t.slice(0,a+1).join("/"),l.onclick=function(t){var e=this.path,i=window.location.hostname+e,l=getDir(e),i=window.location.origin;if(!i){i=window.location.protocol,-1===i.indexOf(":")&&(i+=":");var a=window.location.host;i+="//"+a;var n=parseInt(window.location.port);isNaN(n)||-1!==a.indexOf(":")||(i+=":"+n)}i+="/"+e,me.updateLink(i,e,l)&&(t.preventDefault(),getHTML(i,function(e,t,a){load(e,t,i,l,a)}))}),config.navbar.appendChild(l)}},this.updateSidebar=function(e){};var updateContent=function(e){highlight(e);var t=e.getElementsByTagName("a");me.updateLinks(t)},getPath=function(e){return null==e?e="":0==e.indexOf("/")&&(1<e.length?e=e.substring(1):e=""),e},getDir=function(e){var t=e.toLowerCase(),i=t.indexOf("/");return 0<i&&(t=t.substring(0,i)),t},getHTML=function(e,t){e+="",e+=-1==e.indexOf("?")?"?":"&",e+="template=false",pageLoader.load(e,function(e,i,l){var a=document.createElement("div");if(setStyle(a,config.style.panel),a.innerHTML=e,e=a.outerHTML,null==i||0==i.length){var n=a.getElementsByTagName("h1");0<n.length&&(i=n[0].innerHTML)}a=null,t&&t.apply(me,[e,i,l])})},getFirstChild=function(e){for(var t,l=0;l<e.childNodes.length;l++)if(t=e.childNodes[l],1===t.nodeType)return t;return null},log=function(e){debug&&console.log(e)},_getRect=javaxt.dhtml.utils.getRect,merge=javaxt.dhtml.utils.merge,setStyle=javaxt.dhtml.utils.setStyle;init()};
